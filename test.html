<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Three.js Test</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif;
  background: white;
  color: #111;
}

#bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
  opacity: 0.35;
}

main {
  max-width: 600px;
  margin: 0 auto;
  padding: 80px 24px;
  position: relative;
  z-index: 1;
}

.header h1 {
  font-size: 1.5rem;
  font-weight: 500;
  margin-bottom: 24px;
}

.status {
  padding: 12px;
  background: #f0f0f0;
  border-radius: 4px;
  margin: 20px 0;
  font-size: 0.9rem;
}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<main>
<div class="header">
<h1>Three.js Animation Test</h1>
<div class="status" id="status">Initializing...</div>
</div>

<p>If the animation is working, you should see a rotating wireframe grid in the background.</p>
</main>

<script src="https://unpkg.com/three@0.161.0/build/three.min.js"></script>
<script>
// Debug logging
const statusEl = document.getElementById("status");

function updateStatus(msg) {
  console.log(msg);
  statusEl.textContent = msg;
}

// Check if Three.js loaded
if (typeof THREE === 'undefined') {
  updateStatus('ERROR: Three.js failed to load!');
} else {
  updateStatus('Three.js loaded successfully. Version: ' + THREE.REVISION);
}

const canvas = document.getElementById("bg");

if (!canvas) {
  updateStatus('ERROR: Canvas element not found');
} else {
  updateStatus('Canvas found. Setting up scene...');
  
  try {
    const scene = new THREE.Scene();
    
    const camera = new THREE.PerspectiveCamera(
      60,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    camera.position.z = 4;
    
    const renderer = new THREE.WebGLRenderer({
      canvas: canvas,
      alpha: true,
      antialias: true
    });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    
    // Geometry â€“ plane with wireframe
    const geometry = new THREE.PlaneGeometry(10, 10, 30, 30);
    
    const material = new THREE.MeshBasicMaterial({
      color: 0x000000,
      wireframe: true,
      transparent: true,
      opacity: 0.25
    });
    
    const mesh = new THREE.Mesh(geometry, material);
    scene.add(mesh);
    
    // Slight tilt for depth
    mesh.rotation.x = -0.4;
    mesh.rotation.y = 0.2;
    
    updateStatus('Scene created! Animation should be running...');
    
    // Animate
    let frameCount = 0;
    function animate() {
      requestAnimationFrame(animate);
      
      mesh.rotation.z += 0.0008;
      mesh.rotation.y += 0.0004;
      
      renderer.render(scene, camera);
      
      // Update status every 60 frames
      frameCount++;
      if (frameCount === 60) {
        updateStatus('Animation running! Frame count: ' + frameCount);
      } else if (frameCount % 300 === 0) {
        updateStatus('Still animating... Frames: ' + frameCount);
      }
    }
    
    animate();
    
    // Handle resize
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
    
  } catch (error) {
    updateStatus('ERROR during setup: ' + error.message);
    console.error(error);
  }
}
</script>

</body>
</html>